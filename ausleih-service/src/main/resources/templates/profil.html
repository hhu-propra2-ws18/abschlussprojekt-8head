<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="../static/css/navbar :: style">
	<meta charset="UTF-8">
	<title th:text="${'Profil von ' + benutzer.username}">Profil von xxx</title>
</head>
<body>
<nav th:replace="../static/css/navbar :: main-menu">menu</nav>
<h1>
	<div th:text="${'Profil von ' + benutzer.username}">siker102</div>
</h1>
<h4>
	<div th:text="${'Name: ' + benutzer.vorname + ' ' + benutzer.nachname}">Simon Kerkmann</div>
</h4>

<table th:if="${user.isAdmin() or user.isHimself(benutzer)}" id="items">
	<tr>
		<th>Username</th>
		<th>Vorname</th>
		<th>Nachname</th>
		<th>E-Mail</th>
		<th>Passwort</th>
	</tr>
	<tr>
		<td th:text="${benutzer.username}">MaMus</td>
		<td th:text="${benutzer.vorname}">Max</td>
		<td th:text="${benutzer.nachname}">Mustermann</td>
		<td th:text="${benutzer.email}">mamus@gmail.com</td>

	</tr>
	<form th:action="@{/profil/{PersonId} (PersonId=${benutzer.getId()})}" th:object="${benutzer}" method="post">
		<tr>
			<td th:if="${user.isAdmin() and !(user.isHimself(benutzer))}">
				<input name="newUsername" type="text" th:field="*{username}">
			</td>
			<div id="error" th:text="${usernameErrors?.code}"></div>
			<td th:unless="${user.isAdmin() and !(user.isHimself(benutzer))}">
			</td>
			<td>
				<input name="newVorname" type="text" th:field="*{vorname}">
				<div id="error" th:text="${vornameErrors?.code}"></div>
			</td>
			<td>
				<input name="newNachname" type="text" th:field="*{nachname}">
				<div id="error" th:text="${nachnameErrors?.code}"></div>
			</td>
			<td>
				<input name="newEMail" type="email" th:field="*{email}">
				<div id="error" th:text="${emailErrors?.code}"></div>
			</td>
			<td>
				<input name="newPassword" type="password" th:field="*{password}" th:id="password">
				<div id="error" th:text="${passwordErrors?.code}"></div>
			</td>
			<td>
				<button type="submit" value="true" name="editPerson">Nutzer Ändern</button>
			</td>
		</tr>
	</form>
</table>
<h1 th:if="${user.isHimself(benutzer)}">
	<div th:text="${moneten}"></div>
</h1>

<form th:if="${user.isHimself(benutzer)}" action="#"
	  th:action="@{/profiladdmoney/{benutzerID} (benutzerID=${benutzer.getId()})}" method="post">
	<input type="number" name="moneten" min="0">
	<button type="submit">€ Aufladen</button>
</form>

<div class="container">
	<h2>Ausgeliehene Items </h2>
	<table class="table table-hover">
		<thead>
		<tr>
			<th>Item</th>
			<th>Von</th>
			<th>Bis</th>
			<th>Status</th>
		</tr>
		</thead>
		<tbody>
		<tr th:each="ausleihe : ${benutzer.ausleihen}">
			<td th:text="${ausleihe.item.titel}"></td>
			<td th:text="${ausleihe.startDatum.toString()}"></td>
			<td th:text="${ausleihe.endDatum.toString()}"></td>
			<td th:text="${ausleihe.status}"></td>
		</tr>
		</tbody>
	</table>
</div>

<div class="container">
	<h2>Ausleihen von eigenen Items</h2>
	<div th:each="item : ${benutzer.items}">
		<table class="table table-hover">
			<thead>
			<tr>
				<th>Item</th>
				<th>Von</th>
				<th>Bis</th>
				<th>Bestätigen</th>
			</tr>
			</thead>
			<tbody>
			<tr th:each="ausleihe : ${item.ausleihen}">
				<td th:text="${ausleihe.item.titel}"></td>
				<td th:text="${ausleihe.startDatum.toString()}"></td>
				<td th:text="${ausleihe.endDatum.toString()}"></td>
				<td>
					<span th:if="${ausleihe.status == 'ANGEFRAGT'}"></span>
				</td>
			</tr>
			</tbody>
		</table>
	</div>
</div>

</body>
</html>