<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="../static/css/navbar :: style">
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>Artikeldetails</title>
</head>
<body>
<nav th:replace="../static/css/navbar :: main-menu">menu</nav>
<container class="container px-lg-5">
	<div class="row mx-lg-n5 product-details-row">
		<div>
			<table class="product-details">
				<tr>
					<td><h2 th:text="${artikel.titel}">ITEM</h2></td>
					<td><img th:if="${artikel.picture == null}" th:src="@{${'img/' + artikel.image}}" th:width="60px"
							 th:height="60px"/>
						<img th:if="${artikel.picture != null and artikel.getBase64EncodedString()!=null}"
							 th:src="@{'data:image/png;base64,'+${artikel.getBase64EncodedString()}}"/></td>
				</tr>
				<tr>
					<td>Beschreibung</td>
					<td th:text="${artikel.beschreibung}"></td>
				</tr>
				<tr>
					<td>Verf端gbarkeit ab</td>
					<td th:text="${artikel.availableFrom.format(dateformat)}"></td>
				</tr>
				<tr>
					<td>Verf端gbar bis</td>
					<td th:text="${artikel.availableTill.format(dateformat)}"></td>
				</tr>
				<tr>
					<td>Noch verf端gbar zu folgenden Zeiten</td>
					<td>
						<table class="table-striped">
							<tr th:each="periods: ${artikel.availablePeriods}">
								<td th:text="${periods}">from now to then</td>
							</tr>
						</table>
					</td>
				</tr>
				<tr>
					<td>Tagessatz</td>
					<td th:text="${artikel.tagessatz} + &euro;"></td>
				</tr>
				<tr>
					<td>Kaution</td>
					<td th:text="${artikel.kautionswert} + &euro;"></td>
				</tr>
				<tr>
					<td>Standort</td>
					<td th:text="${artikel.abholort.beschreibung}"></td>
				</tr>
				<tr>
					<td>Verleihender</td>
					<td th:href="${'/profil/' + artikel.besitzer.id}" th:text="${artikel.besitzer.vorname +
					 ' ' + artikel.besitzer.nachname}"></td>
				</tr>
				<tr style="background:white">
					<td><a href="/liste">Zur端ck</a></td>
				</tr>
			</table>

		</div>
		<div>
			<div id="mapid" class="product-details-map">map is here</div>
		</div>
	</div>
</container>
<script th:inline="javascript">
    /*<![CDATA[*/
    var longitude = /*[[${artikel.abholort.longitude}]]*/;
    var latitude = /*[[${artikel.abholort.latitude}]]*/;
    var map = L.map('mapid').setView([latitude, longitude], 13);
    mapLink = '<a href="http://openstreetmap.org">OpenStreetMap</a>';
    L.tileLayer(
        'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; ' + mapLink + ' Contributors',
            maxZoom: 18,
        }).addTo(map);
    var message = /*[[${artikel.abholort.beschreibung}]]*/
        L.marker([latitude, longitude]).addTo(map)
            .bindPopup(message).openPopup();
    /*]]>*/
</script>
</body>
</html>